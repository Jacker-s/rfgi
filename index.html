<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Ar Condicionado</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
    --bg-light: #f2f2f7;
    --bg-dark: #0b0b0f;
    --card-light: #ffffff;
    --card-dark: #1c1c1e;
    --text-light: #000;
    --text-dark: #fff;
    --accent: #0a84ff;
}

@media (prefers-color-scheme: dark) {
    body.auto {
        background: var(--bg-dark);
        color: var(--text-dark);
    }
}

body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display";
    background: var(--bg-light);
    color: var(--text-light);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    transition: background .4s, color .4s;
}

body.dark {
    background: var(--bg-dark);
    color: var(--text-dark);
}

.phone {
    width: 100%;
    max-width: 390px;
    padding: 20px;
}

.card {
    background: var(--card-light);
    border-radius: 28px;
    padding: 24px;
    box-shadow: 0 30px 60px rgba(0,0,0,.2);
    transition: background .4s;
}

body.dark .card {
    background: var(--card-dark);
}

h1 {
    font-size: 22px;
    text-align: center;
    margin-bottom: 16px;
}

.temp {
    font-size: 72px;
    font-weight: 600;
    text-align: center;
    transition: transform .3s;
}

.controls, .modes, .fan {
    display: flex;
    justify-content: space-between;
    margin: 16px 0;
    gap: 8px;
}

button {
    flex: 1;
    padding: 14px;
    border: none;
    border-radius: 16px;
    font-size: 16px;
    background: rgba(0,0,0,.05);
    transition: all .25s;
}

body.dark button {
    background: rgba(255,255,255,.08);
    color: white;
}

button:active {
    transform: scale(.95);
}

.mode.active, .fan button.active {
    background: var(--accent);
    color: white;
}

.toggle {
    margin-top: 14px;
    display: flex;
    justify-content: space-between;
}

.status {
    text-align: center;
    font-size: 14px;
    opacity: .7;
    margin-top: 12px;
}
</style>
</head>

<body class="auto">
<div class="phone">
    <div class="card">
        <h1>Ar Condicionado</h1>

        <div class="temp" id="temp">24¬∞</div>

        <div class="controls">
            <button onclick="temp(-1)">‚àí</button>
            <button onclick="temp(1)">+</button>
        </div>

        <div class="modes">
            <button class="mode active" onclick="mode(this)">‚ùÑÔ∏è Frio</button>
            <button class="mode" onclick="mode(this)">üåÄ Ventilar</button>
            <button class="mode" onclick="mode(this)">üî• Aquecer</button>
        </div>

        <div class="fan">
            <button class="active" onclick="fan(this)">üå¨Ô∏è Baixo</button>
            <button onclick="fan(this)">üå¨Ô∏è M√©dio</button>
            <button onclick="fan(this)">üå¨Ô∏è Alto</button>
        </div>

        <div class="toggle">
            <button onclick="togglePower()">‚èª Liga/Desliga</button>
            <button onclick="toggleTheme()">üåô Tema</button>
        </div>

        <div class="status" id="status">Ligado ‚Ä¢ Frio ‚Ä¢ Ventilador Baixo</div>
    </div>
</div>

<script>
let temperature = 24;
let isOn = true;
let currentMode = "Frio";
let fanSpeed = "Baixo";
let dark = false;

function temp(v){
    if(!isOn) return;
    temperature = Math.min(30, Math.max(16, temperature+v));
    document.getElementById("temp").innerText = temperature+"¬∞";
    document.getElementById("temp").style.transform = "scale(1.05)";
    setTimeout(()=>document.getElementById("temp").style.transform="scale(1)",200);
}

function mode(el){
    if(!isOn) return;
    document.querySelectorAll(".mode").forEach(b=>b.classList.remove("active"));
    el.classList.add("active");
    currentMode = el.innerText;
    update();
}

function fan(el){
    if(!isOn) return;
    document.querySelectorAll(".fan button").forEach(b=>b.classList.remove("active"));
    el.classList.add("active");
    fanSpeed = el.innerText.replace("üå¨Ô∏è","").trim();
    update();
}

function togglePower(){
    isOn = !isOn;
    update();
}

function toggleTheme(){
    dark = !dark;
    document.body.classList.toggle("dark", dark);
    document.body.classList.remove("auto");
}

function update(){
    document.getElementById("status").innerText =
        isOn ? `Ligado ‚Ä¢ ${currentMode} ‚Ä¢ Ventilador ${fanSpeed}` : "Desligado";
}

/* ---------- PWA ---------- */
const manifest = {
    name: "Controle de Ar",
    short_name: "Ar",
    start_url: ".",
    display: "standalone",
    background_color: "#ffffff",
    theme_color: "#0a84ff",
    icons: [{
        src: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA",
        sizes: "192x192",
        type: "image/png"
    }]
};

const blob = new Blob([JSON.stringify(manifest)], {type: "application/json"});
const manifestURL = URL.createObjectURL(blob);
const link = document.createElement("link");
link.rel = "manifest";
link.href = manifestURL;
document.head.appendChild(link);

if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register(URL.createObjectURL(
        new Blob([`self.addEventListener('fetch',()=>{})`],{type:'text/javascript'})
    ));
}
</script>
</body>
</html>
